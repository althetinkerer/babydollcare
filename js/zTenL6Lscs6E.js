/*! * Snowplow - The world's most powerful web analytics platform
 *
 * @description JavaScript tracker for Snowplow
 * @version     2.0.0
 * @author      Alex Dean, Simon Andersson, Anthon Pang, Fred Blundun
 * @copyright   Anthon Pang, Snowplow Analytics Ltd
 * @license     Simplified BSD
 */
!function e(t,n,r){function a(i,c){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=n[i]={exports:{}};t[i][0].call(u.exports,(function(e){var n=t[i][1][e];return a(n||e)}),u,u.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(require,module,exports){var JSON;JSON||(JSON={}),function(){var global=Function("return this")(),JSON=global.JSON;function f(e){return e<10?"0"+e:e}JSON||(JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,r,a,o,i,c=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(s)){for(o=s.length,n=0;n<o;n+=1)i[n]=str(n,s)||"null";return a=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+c+"]":"["+i.join(",")+"]",gap=c,a}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(a=str(r=rep[n],s))&&i.push(quote(r)+(gap?": ":":")+a);else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a=str(r,s))&&i.push(quote(r)+(gap?": ":":")+a);return a=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+c+"}":"{"+i.join(",")+"}",gap=c,a}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(void 0!==(r=walk(a,n))?a[n]=r:delete a[n]);return reviver.call(e,t,a)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),global.JSON=JSON,module.exports=JSON}()},{}],2:[function(e,t,n){this.cookie=function(e,t,n,r,a,o){return arguments.length>1?document.cookie=e+"="+escape(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString():"")+(r?"; path="+r:"")+(a?"; domain="+a:"")+(o?"; secure":""):unescape((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}},{}],3:[function(e,t,n){var r,a,o,i,c,s;r=this,a=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},o=function(e,t,n){var r=new Date;return void 0!==e&&r.setFullYear(e),r.setMonth(t),r.setDate(n),r},i=function(e){return a(o(e,0,2))},c=function(e){return a(o(e,5,2))},(s={determine:function(){var e=function(){var e=i(),t=c(),n=e-t;return n<0?e+",1":n>0?t+",1,s":e+",0"}();return new s.TimeZone(s.olson.timezones[e])},date_is_dst:function(e){var t=e.getMonth()>7,n=t?c(e.getFullYear()):i(e.getFullYear()),r=n-a(e);return n<0||t?0!==r:r<0},dst_start_for:function(e){var t=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Europe/Helsinki":new Date(2013,2,31,5,0,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":t,"Asia/Amman":new Date(2013,2,29,1,0,0,0),"Asia/Beirut":new Date(2013,2,31,2,0,0,0),"Asia/Damascus":new Date(2013,3,6,2,0,0,0),"Asia/Jerusalem":new Date(2013,2,29,5,0,0,0),"Asia/Yekaterinburg":t,"Asia/Omsk":t,"Asia/Krasnoyarsk":t,"Asia/Irkutsk":t,"Asia/Yakutsk":t,"Asia/Vladivostok":t,"Asia/Baku":new Date(2013,2,31,4,0,0),"Asia/Yerevan":new Date(2013,2,31,3,0,0),"Asia/Kamchatka":t,"Asia/Gaza":new Date(2010,2,27,4,0,0),"Africa/Cairo":new Date(2010,4,1,3,0,0),"Europe/Minsk":t,"Pacific/Apia":new Date(2010,10,1,1,0,0,0),"Pacific/Fiji":new Date(2010,11,1,0,0,0),"Australia/Perth":new Date(2008,10,1,1,0,0,0)}[e]}}).TimeZone=function(e){var t={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Asia/Beirut","Europe/Helsinki","Asia/Damascus"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk"],"Asia/Baku":["Asia/Yerevan","Asia/Baku"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},n=e;return void 0!==t[n]&&function(){for(var e=t[n],r=e.length,a=0,o=e[0];a<r;a+=1)if(o=e[a],s.date_is_dst(s.dst_start_for(o)))return void(n=o)}(),{name:function(){return n}}},s.olson={},s.olson.timezones={"-720,0":"Pacific/Majuro","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},void 0!==n?n.jstz=s:r.jstz=s},{}],4:[function(e,t,n){!function(){var e=this;function n(e,t){var n,r,a,o,i,c,s,u;for(n=3&e.length,r=e.length-n,a=t,i=3432918353,c=461845907,u=0;u<r;)s=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,a=27492+(65535&(o=5*(65535&(a=(a^=s=(65535&(s=(s=(65535&s)*i+(((s>>>16)*i&65535)<<16)&4294967295)<<15|s>>>17))*c+(((s>>>16)*c&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(s=0,n){case 3:s^=(255&e.charCodeAt(u+2))<<16;case 2:s^=(255&e.charCodeAt(u+1))<<8;case 1:a^=s=(65535&(s=(s=(65535&(s^=255&e.charCodeAt(u)))*i+(((s>>>16)*i&65535)<<16)&4294967295)<<15|s>>>17))*c+(((s>>>16)*c&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}var r=n;if(r.v2=function(e,t){for(var n,r=e.length,a=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:a^=(255&e.charCodeAt(o+2))<<16;case 2:a^=(255&e.charCodeAt(o+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(o)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0},r.v3=n,void 0!==t)t.exports=r;else{var a=e.murmur;r.noConflict=function(){return e.murmur=a,r},e.murmur=r}}()},{}],5:[function(e,t,n){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};t.exports=r},{}],6:[function(e,t,n){var r,a;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&a.rotl(e,8)|4278255360&a.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?t.push(r.charAt(a>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|r.indexOf(e.charAt(n))>>>6-2*a);return t}},t.exports=a},{}],7:[function(e,t,n){var r,a,o,i;r=e("crypt"),a=e("charenc").utf8,o=e("charenc").bin,(i=function(e,t){var n=r.wordsToBytes(function(e){e.constructor==String&&(e=a.stringToBytes(e));var t=r.bytesToWords(e),n=8*e.length,o=[],i=1732584193,c=-271733879,s=-1732584194,u=271733878,l=-1009589776;t[n>>5]|=128<<24-n%32,t[15+(n+64>>>9<<4)]=n;for(var f=0;f<t.length;f+=16){for(var d=i,p=c,g=s,h=u,m=l,v=0;v<80;v++){if(v<16)o[v]=t[f+v];else{var y=o[v-3]^o[v-8]^o[v-14]^o[v-16];o[v]=y<<1|y>>>31}var w=(i<<5|i>>>27)+l+(o[v]>>>0)+(v<20?1518500249+(c&s|~c&u):v<40?1859775393+(c^s^u):v<60?(c&s|c&u|s&u)-1894007588:(c^s^u)-899497514);l=u,u=s,s=c<<30|c>>>2,c=i,i=w}i+=d,c+=p,s+=g,u+=h,l+=m}return[i,c,s,u,l]}(e));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)})._blocksize=16,i._digestsize=20,t.exports=i},{charenc:5,crypt:6}],8:[function(e,t,n){!function(){var t=e("./lib_managed/lodash"),r=e("./lib/helpers");(void 0!==n?n:this).InQueueManager=function(e,n,a,o,i){var c={},s={};function u(e){var n=[];if(e&&0!==e.length)for(var a=0;a<e.length;a++)c.hasOwnProperty(e[a])?n.push(c[e[a]]):r.warn('Warning: Tracker namespace "'+e[a]+'" not configured');else n=t.map(c);return 0===n.length&&r.warn("Warning: No tracker configured"),n}function l(e,n,a){var o;r.warn(e+" is deprecated. Set the collector when a new tracker instance using newTracker."),f(o=t.isUndefined(a)?"sp":a),c[o][e](n)}function f(t,r,o){!(o=o||{}).writeCookies&&o.cookieName in s?o.writeCookies=!1:s[o.cookieName]=!0,c[t]=new e(i,t,n,a,o),c[t].setCollectorUrl(r)}function d(e){var t=e.split(":");return[t[0],t.length>1?t[1].split(";"):[]]}function p(){var e,n,r,a,o,i;for(e=0;e<arguments.length;e+=1)if(r=arguments[e],n=(a=d(Array.prototype.shift.call(r)))[0],o=a[1],"newTracker"!==n)if("setCollectorCf"!==n&&"setCollectorUrl"!==n||o&&0!==o.length)if(i=u(o),t.isString(n))for(var c=0;c<i.length;c++)i[c][n].apply(i[c],r);else for(c=0;c<i.length;c++)n.apply(i[c],r);else l(n,r[0],r[1]);else f(r[0],r[1],r[2])}for(var g=0;g<o.length;g++)p(o[g]);return{push:p}}}()},{"./lib/helpers":12,"./lib_managed/lodash":14}],9:[function(e,t,n){var r,a,o=e("./snowplow"),i=window;i.GlobalSnowplowNamespace&&i.GlobalSnowplowNamespace.length>0?(r=i.GlobalSnowplowNamespace.shift(),(a=i[r]).q=new o.Snowplow(a.q,r)):(i._snaq=i._snaq||[],i._snaq=new o.Snowplow(i._snaq,"_snaq"))},{"./snowplow":17}],10:[function(e,t,n){!function(){(void 0!==n?n:this).base64encode=function(e){var t,n,r,a,o,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,s=0,u="",l=[];if(!e)return e;e=unescape(encodeURIComponent(e));do{t=(o=e.charCodeAt(c++)<<16|e.charCodeAt(c++)<<8|e.charCodeAt(c++))>>18&63,n=o>>12&63,r=o>>6&63,a=63&o,l[s++]=i.charAt(t)+i.charAt(n)+i.charAt(r)+i.charAt(a)}while(c<e.length);u=l.join("");var f=e.length%3;return(f?u.slice(0,f-3):u)+"===".slice(f||3)}}()},{}],11:[function(e,t,n){!function(){var t=e("../lib_managed/lodash"),r=(e("./helpers"),e("murmurhash").v3),a=e("jstimezonedetect").jstz.determine(),o=e("browser-cookie-lite"),i=void 0!==n?n:this,c=window,s=navigator,u=screen,l=document;i.hasSessionStorage=function(){try{return!!c.sessionStorage}catch(e){return!0}},i.hasLocalStorage=function(){try{return!!c.localStorage}catch(e){return!0}},i.localStorageAccessible=function(){var e="modernizr";if(!i.hasLocalStorage())return!1;try{return c.localStorage.setItem(e,e),c.localStorage.removeItem(e),!0}catch(e){return!1}},i.hasCookies=function(e){var n=e||"testcookie";return t.isUndefined(s.cookieEnabled)?(o.cookie(n,"1"),"1"===o.cookie(n)?"1":"0"):s.cookieEnabled?"1":"0"},i.detectSignature=function(e){var t=[s.userAgent,[u.height,u.width,u.colorDepth].join("x"),(new Date).getTimezoneOffset(),i.hasSessionStorage(),i.hasLocalStorage()],n=[];if(s.plugins)for(var a=0;a<s.plugins.length;a++){for(var o=[],c=0;c<s.plugins[a].length;c++)o.push([s.plugins[a][c].type,s.plugins[a][c].suffixes]);n.push([s.plugins[a].name+"::"+s.plugins[a].description,o.join("~")])}return r(t.join("###")+"###"+n.sort().join(";"),e)},i.detectTimezone=function(){return void 0===a?"":a.name()},i.detectViewport=function(){var e=c,t="inner";return"innerWidth"in c||(t="client",e=l.documentElement||l.body),e[t+"Width"]+"x"+e[t+"Height"]},i.detectDocumentSize=function(){var e=l.documentElement,t=Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth),n=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight);return isNaN(t)||isNaN(n)?"":t+"x"+n},i.detectBrowserFeatures=function(e){var n,r,a={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},o={};if(s.mimeTypes&&s.mimeTypes.length)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r=s.mimeTypes[a[n]],o[n]=r&&r.enabledPlugin?"1":"0");return"unknown"!=typeof s.javaEnabled&&!t.isUndefined(s.javaEnabled)&&s.javaEnabled()&&(o.java="1"),t.isFunction(c.GearsFactory)&&(o.gears="1"),o.res=u.width+"x"+u.height,o.cd=u.colorDepth,o.cookie=i.hasCookies(e),o}}()},{"../lib_managed/lodash":14,"./helpers":12,"browser-cookie-lite":2,jstimezonedetect:3,murmurhash:4}],12:[function(e,t,n){!function(){var t=e("../lib_managed/lodash"),r=void 0!==n?n:this;r.fixupTitle=function(e){if(!t.isString(e)){e=e.text||"";var n=document.getElementsByTagName("title");n&&!t.isUndefined(n[0])&&(e=n[0].text)}return e},r.getHostName=function(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)").exec(e);return t?t[1]:e},r.fixupDomain=function(e){var t=e.length;return"."===e.charAt(--t)&&(e=e.slice(0,t)),"*."===e.slice(0,2)&&(e=e.slice(1)),e},r.getReferrer=function(){var e="",t=r.fromQuerystring("referrer",window.location.href)||r.fromQuerystring("referer",window.location.href);if(t)return t;try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(t){e=""}}return""===e&&(e=document.referrer),e},r.addEventListener=function(e,t,n,r){return e.addEventListener?(e.addEventListener(t,n,r),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n)},r.fromQuerystring=function(e,t){var n=RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},r.deleteEmptyProperties=function(e){for(var n in e)e.hasOwnProperty(n)&&(t.isUndefined(e[n])||t.isNull(e[n])||0===e[n].length)&&delete e[n];return e},r.warn=function(e){void 0!==typeof console&&console.warn("Snowplow: "+e)}}()},{"../lib_managed/lodash":14}],13:[function(e,t,n){!function(){var t=e("./helpers");function r(e){var t,n;if(function(e){return new RegExp("^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$").test(e)}(e))try{return t=document.body.children[0].children[0].children[0].children[0].children[0].children[0].innerHTML,n="You have reached the cached page for",t.slice(0,n.length)===n}catch(e){return!1}}(void 0!==n?n:this).fixupUrl=function(e,n,a){return"translate.googleusercontent.com"===e?(""===a&&(a=n),n=function(e,n){var r=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)").exec(e);return t.fromQuerystring(n,r[1])}(n,"u"),e=t.getHostName(n)):("cc.bingj.com"===e||"webcache.googleusercontent.com"===e||r(e))&&(n=document.links[0].href,e=t.getHostName(n)),[e,n,a]}}()},{"./helpers":12}],14:[function(e,t,n){(function(e){(function(){var r=[],a={},o=/^\s*function[ \n\r\t]+\w/,i=/\bthis\b/,c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],s="[object Arguments]",u="[object Array]",l="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",g="[object Number]",h="[object Object]",m="[object RegExp]",v="[object String]",y={configurable:!1,enumerable:!1,value:null,writable:!1},w={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},b={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},A=b[typeof window]&&window||this,x=b[typeof n]&&n&&!n.nodeType&&n,S=b[typeof t]&&t&&!t.nodeType&&t,_=S&&S.exports===x&&x,T=b[typeof e]&&e;function O(){return r.pop()||[]}function C(e){e.length=0,r.length<40&&r.push(e)}function E(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,a=n-t||0,o=Array(a<0?0:a);++r<a;)o[r]=e[t+r];return o}!T||T.global!==T&&T.window!==T||(A=T);var P=[],j=Error.prototype,D=Object.prototype,N=String.prototype,I=D.toString,L=RegExp("^"+String(I).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),J=Function.prototype.toString,U=D.hasOwnProperty,B=P.push,M=D.propertyIsEnumerable,R=P.unshift,F=function(){try{var e={},t=ne(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(e){}return n}(),H=ne(H=Object.create)&&H,q=ne(q=Array.isArray)&&q,z=ne(z=Object.keys)&&z,Y={};function G(){}Y[u]=Y[f]=Y[g]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Y[l]=Y[v]={constructor:!0,toString:!0,valueOf:!0},Y[d]=Y[p]=Y[m]={constructor:!0,toString:!0},Y[h]={constructor:!0},function(){for(var e=c.length;e--;){var t=c[e];for(var n in Y)U.call(Y,n)&&!U.call(Y[n],t)&&(Y[n][t]=!1)}}();var W=G.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];for(var r in e.prototype={valueOf:1,y:1},new e)n.push(r);for(r in arguments);W.argsClass=I.call(arguments)==s,W.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),W.enumErrorProps=M.call(j,"message")||M.call(j,"name"),W.enumPrototypes=M.call(e,"prototype"),W.funcDecomp=!ne(A.WinRTError)&&i.test((function(){return this})),W.funcNames="string"==typeof Function.name,W.nonEnumArgs=0!=r,W.nonEnumShadows=!/valueOf/.test(n),W.spliceObjects=(P.splice.call(t,0,1),!t[0]),W.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1);var K=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",W.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):W.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),W.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),W.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(W.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),W.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",W.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||W.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};function Q(e){var t=e[0],n=e[2],r=e[4];function a(){if(n){var e=E(n);B.apply(e,arguments)}if(this instanceof a){var o=V(t.prototype),i=t.apply(o,e||arguments);return ge(i)?i:o}return t.apply(r,e||arguments)}return re(a,e),a}function V(e,t){return ge(e)?H(e):{}}function Z(e,t,n){if("function"!=typeof e)return ye;if(void 0===t||!("prototype"in e))return e;var r=e.__bindData__;if(void 0===r&&(W.funcNames&&(r=!e.name),!(r=r||!W.funcDecomp))){var a=J.call(e);W.funcNames||(r=!o.test(a)),r||(r=i.test(a),re(e,r))}if(!1===r||!0!==r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,o){return e.call(t,n,r,a,o)}}return ve(e,t)}function $(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],c=1&n,s=2&n,u=4&n,l=8&n,f=t;function d(){var e=c?o:this;if(r){var p=E(r);B.apply(p,arguments)}if((a||u)&&(p||(p=E(arguments)),a&&B.apply(p,a),u&&p.length<i))return n|=16,$([t,l?n:-4&n,p,null,o,i]);if(p||(p=arguments),s&&(t=e[f]),this instanceof d){e=V(t.prototype);var g=t.apply(e,p);return ge(g)?g:e}return t.apply(e,p)}return re(d,e),d}function X(e,t,n,r,a,o){if(n){var i=n(e,t);if(void 0!==i)return!!i}if(e===t)return 0!==e||1/e==1/t;if(!(e!=e||e&&b[typeof e]||t&&b[typeof t]))return!1;if(null==e||null==t)return e===t;var c=I.call(e),d=I.call(t);if(c==s&&(c=h),d==s&&(d=h),c!=d)return!1;switch(c){case l:case f:return+e==+t;case g:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case m:case v:return e==String(t)}var p=c==u;if(!p){var y=U.call(e,"__wrapped__"),w=U.call(t,"__wrapped__");if(y||w)return X(y?e.__wrapped__:e,w?t.__wrapped__:t,n,r,a,o);if(c!=h)return!1;var A=!W.argsObject&&ae(e)?Object:e.constructor,k=!W.argsObject&&ae(t)?Object:t.constructor;if(A!=k&&!(pe(A)&&A instanceof A&&pe(k)&&k instanceof k)&&"constructor"in e&&"constructor"in t)return!1}var x=!a;a||(a=O()),o||(o=O());for(var S=a.length;S--;)if(a[S]==e)return o[S]==t;var _=0;if(i=!0,a.push(e),o.push(t),p){if(S=e.length,_=t.length,(i=_==S)||r)for(;_--;){var T=S,E=t[_];if(r)for(;T--&&!(i=X(e[T],E,n,r,a,o)););else if(!(i=X(e[_],E,n,r,a,o)))break}}else fe(t,(function(t,c,s){if(U.call(s,c))return _++,i=U.call(e,c)&&X(e[c],t,n,r,a,o)})),i&&!r&&fe(e,(function(e,t,n){if(U.call(n,t))return i=--_>-1}));return a.pop(),o.pop(),x&&(C(a),C(o)),i}function ee(e,t,n,r,a,o){var i=1&t,c=4&t,s=16&t,u=32&t;if(!(2&t)&&!pe(e))throw new TypeError;s&&!n.length&&(t&=-17,s=n=!1),u&&!r.length&&(t&=-33,u=r=!1);var l=e&&e.__bindData__;return l&&!0!==l?((l=E(l))[2]&&(l[2]=E(l[2])),l[3]&&(l[3]=E(l[3])),!i||1&l[1]||(l[4]=a),!i&&1&l[1]&&(t|=8),!c||4&l[1]||(l[5]=o),s&&B.apply(l[2]||(l[2]=[]),n),u&&R.apply(l[3]||(l[3]=[]),r),l[1]|=t,ee.apply(null,l)):(1==t||17===t?Q:$)([e,t,n,r,a,o])}function te(){w.shadowedProps=c,w.array=w.bottom=w.loop=w.top="",w.init="iterable",w.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)w[n]=e[n];var r=w.args;w.firstArg=/^[^,]+/.exec(r)[0];var o=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+K(w)+"\n}");return o(Z,d,j,U,a,ae,oe,he,w.keys,D,b,Y,v,N,I)}function ne(e){return"function"==typeof e&&L.test(e)}H||(V=function(){function e(){}return function(t){if(ge(t)){e.prototype=t;var n=new e;e.prototype=null}return n||A.Object()}}());var re=F?function(e,t){y.value=t,F(e,"__bindData__",y)}:we;function ae(e){return e&&"object"==typeof e&&"number"==typeof e.length&&I.call(e)==s||!1}W.argsClass||(ae=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&U.call(e,"callee")&&!M.call(e,"callee")||!1});var oe=q||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&I.call(e)==u||!1},ie=te({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ce=z?function(e){return ge(e)?W.enumPrototypes&&"function"==typeof e||W.nonEnumArgs&&e.length&&ae(e)?ie(e):z(e):[]}:ie,se={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:ce,loop:"if (callback(iterable[index], index, collection) === false) return result"},ue={top:"if (!objectTypes[typeof iterable]) return result;\n"+se.top,array:!1},le=te(se),fe=te(se,ue,{useHas:!1}),de=te(se,ue);function pe(e){return"function"==typeof e}function ge(e){return!(!e||!b[typeof e])}function he(e){return"string"==typeof e||e&&"object"==typeof e&&I.call(e)==v||!1}function me(e,t,n){var r=-1,a=e?e.length:0,o=Array("number"==typeof a?a:0);if(t=G.createCallback(t,n,3),oe(e))for(;++r<a;)o[r]=t(e[r],r,e);else le(e,(function(e,n,a){o[++r]=t(e,n,a)}));return o}function ve(e,t){return arguments.length>2?ee(e,17,E(arguments,2),null,t):ee(e,1,null,null,t)}function ye(e){return e}function we(){}function be(e){return function(t){return t[e]}}pe(/x/)&&(pe=function(e){return"function"==typeof e&&I.call(e)==p}),G.bind=ve,G.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var a=e[t];a&&r.push(a)}return r},G.createCallback=function(e,t,n){var r=typeof e;if(null==e||"function"==r)return Z(e,t,n);if("object"!=r)return be(e);var a=ce(e),o=a[0],i=e[o];return 1!=a.length||i!=i||ge(i)?function(t){for(var n=a.length,r=!1;n--&&(r=X(t[a[n]],e[a[n]],null,!0)););return r}:function(e){var t=e[o];return i===t&&(0!==i||1/i==1/t)}},G.forIn=fe,G.forOwn=de,G.keys=ce,G.map=me,G.property=be,G.collect=me,G.identity=ye,G.isArguments=ae,G.isArray=oe,G.isDate=function(e){return e&&"object"==typeof e&&I.call(e)==f||!1},G.isEmpty=function(e){var t=!0;if(!e)return t;var n=I.call(e),r=e.length;return n==u||n==v||(W.argsClass?n==s:ae(e))||n==h&&"number"==typeof r&&pe(e.splice)?!r:(de(e,(function(){return t=!1})),t)},G.isFunction=pe,G.isNull=function(e){return null===e},G.isObject=ge,G.isString=he,G.isUndefined=function(e){return void 0===e},G.noop=we,G.VERSION="2.4.1",x&&S&&_&&((S.exports=G)._=G)}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){!function(){var t=e("JSON"),r=e("./lib_managed/lodash"),a=e("./lib/detectors").localStorageAccessible();(void 0!==n?n:this).OutQueueManager=function(e,n){var o,i,c=["snowplowOutQueue",e,n].join("_"),s=!1;if(a)try{i=t.parse(localStorage.getItem(c))}catch(e){}function u(){if(i.length<1)s=!1;else{var e,n;for(n in s=!0,i)if(i[n]&&i.hasOwnProperty(n)){if(e=i[n],!r.isString(o))throw"No Snowplow collector configured, cannot track";!function(n){var r=new Image(1,1);r.onload=function(){delete i[n],a&&localStorage.setItem(c,t.stringify(i)),u()},r.onerror=function(){},r.src=o+e}(n)}s=!1,0===r.compact(i).length&&(i=[])}}return void 0!==i&&null!=i||(i=[]),{enqueueRequest:function(e,n){i.push(e),o=n,a&&localStorage.setItem(c,t.stringify(i)),s||u()}}}}()},{"./lib/detectors":11,"./lib_managed/lodash":14,JSON:1}],16:[function(e,t,n){!function(){var t=e("./lib_managed/lodash"),r=e("JSON"),a=e("./lib/base64"),o=void 0!==n?n:this;o.isJson=function(e){return!(t.isUndefined(e)||t.isNull(e)||e.constructor!=={}.constructor&&e.constructor!==[].constructor)},o.isNonEmptyJson=function(e){if(!o.isJson(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!0;return!1},o.payloadBuilder=function(e){var t="",n=function(e,n,r){if(null!=n&&""!==n){var a=t.length>0?"&":"?";t+=a+e+"="+(r?encodeURIComponent(n):n)}},i=function(e,t){n(e,t,!0)},c=function(e,t){n(e,t,!1)};return{add:i,addRaw:c,addJson:function(t,n,s){if(o.isNonEmptyJson(s)){var u=r.stringify(s);e?c(t,function(e){return e?a.base64encode(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"):e}(u)):i(n,u)}},build:function(){return t}}}}()},{"./lib/base64":10,"./lib_managed/lodash":14,JSON:1}],17:[function(e,t,n){!function(){var t=e("./lib/helpers"),r=e("./in_queue"),a=e("./tracker");(void 0!==n?n:this).Snowplow=function(e,n){var o,i=document,c=window,s="js-2.0.0",u={expireDateTime:null,hasLoaded:!1,registeredOnLoadHandlers:[]};function l(){var e;if(!u.hasLoaded)for(u.hasLoaded=!0,e=0;e<u.registeredOnLoadHandlers.length;e++)u.registeredOnLoadHandlers[e]();return!0}return c.Snowplow={getTrackerCf:function(e){var t=new a.Tracker(n,"",s,u,{});return t.setCollectorCf(e),t},getTrackerUrl:function(e){var t=new a.Tracker(n,"",s,u,{});return t.setCollectorCf(e),t},getAsyncTracker:function(){return new a.Tracker(n,"",s,u,{})}},t.addEventListener(c,"beforeunload",(function(){var e;if(u.expireDateTime)do{e=new Date}while(e.getTime()<u.expireDateTime)}),!1),i.addEventListener?t.addEventListener(i,"DOMContentLoaded",(function e(){i.removeEventListener("DOMContentLoaded",e,!1),l()})):i.attachEvent&&(i.attachEvent("onreadystatechange",(function e(){"complete"===i.readyState&&(i.detachEvent("onreadystatechange",e),l())})),i.documentElement.doScroll&&c===c.top&&function e(){if(!u.hasLoaded){try{i.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}l()}}()),new RegExp("WebKit").test(navigator.userAgent)&&(o=setInterval((function(){(u.hasLoaded||/loaded|complete/.test(i.readyState))&&(clearInterval(o),l())}),10)),t.addEventListener(c,"load",l,!1),new r.InQueueManager(a.Tracker,s,u,e,n)}}()},{"./in_queue":8,"./lib/helpers":12,"./tracker":18}],18:[function(e,t,n){!function(){var t=e("./lib_managed/lodash"),r=e("./lib/helpers"),a=e("./lib/proxies"),o=e("browser-cookie-lite"),i=e("./lib/detectors"),c=e("./payload"),s=e("JSON"),u=e("sha1"),l=e("./out_queue");(void 0!==n?n:this).Tracker=function(e,n,f,d,p){var g,h,m,v,y,w,b,A,k,x,S,_,T,O,C,E,P,j,D,N,I=document,L=window,J=navigator,U=a.fixupUrl(I.domain,L.location.href,r.getReferrer()),B=r.fixupDomain(U[0]),M=U[1],R=U[2],F="iglu:com.snowplowanalytics.snowplow",H=(p=p||{}).hasOwnProperty("platform")?p.platform:"web",q=p.hasOwnProperty("appId")?p.appId:"",z=I.title,Y=p.hasOwnProperty("pageUnloadTimer")?p.pageUnloadTimer:500,G=p.hasOwnProperty("cookieName")?p.cookieName:"_sp_",W=p.hasOwnProperty("cookieDomain")?p.cookieDomain:null,K=!p.hasOwnProperty("writeCookies")||p.writeCookies,Q=J.doNotTrack||J.msDoNotTrack,V=!!p.hasOwnProperty("respectDoNotTrack")&&(p.respectDoNotTrack&&("yes"===Q||"1"===Q)),Z=63072e3,$=1800,X=!p.hasOwnProperty("encodeBase64")||p.encodeBase64,ee=p.hasOwnProperty("userFingerprintSeed")?p.userFingerprintSeed:123412414,te=I.characterSet||I.charset,ne=J.userLanguage||J.language,re=i.detectBrowserFeatures(he("testcookie")),ae=i.detectTimezone(),oe=!1===p.userFingerprint?"":i.detectSignature(ee),ie=e+"_"+n,ce=!1,se=u,ue={transaction:{},items:[]},le=new l.OutQueueManager(e,n);function fe(e){if(!t.isEmpty(e))return{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:e}}function de(e){var t;return y?(t=new RegExp("#.*"),e.replace(t,"")):e}function pe(e){var t=new RegExp("^([a-z]+):").exec(e);return t?t[1]:null}function ge(e,t){var n=new Date;V||(le.enqueueRequest(e,g),d.expireDateTime=n.getTime()+t)}function he(e){return G+e+"."+j}function me(e){return o.cookie(he(e))}function ve(){j=se((W||B)+(w||"/")).slice(0,4)}function ye(){var e=new Date;S=e.getTime()}function we(){!function(){var e=be(),t=e[0];t<_?_=t:t>T&&(T=t);var n=e[1];n<O?O=n:n>C&&(C=n)}(),ye()}function be(){var e=I.compatMode&&"BackCompat"!=I.compatMode?I.documentElement:I.body;return[e.scrollLeft||L.pageXOffset,e.scrollTop||L.pageYOffset]}function Ae(){var e=be(),t=e[0];_=t,T=t;var n=e[1];O=n,C=n}function ke(){var e,t=new Date,n=Math.round(t.getTime()/1e3),r=me("id");return r?(e=r.split(".")).unshift("0"):(D||(D=se((J.userAgent||"")+(J.platform||"")+s.stringify(re)+n).slice(0,16)),e=["1",D,n,0,n,""]),e}function xe(e){var t,r,a,c,s,u,l,d=new Date,p=Math.round(d.getTime()/1e3),g=he("id"),m=he("ses"),v=ke(),y=me("ses"),b=h||M;if(V&&K)return o.cookie(g,"",-1,w,W),o.cookie(m,"",-1,w,W),"";for(t in v[0],r=v[1],c=v[2],a=v[3],s=v[4],u=v[5],(!y||parseInt(y)<d.getTime())&&(a++,u=s),e.addRaw("dtm",(new Date).getTime()),e.addRaw("tid",String(Math.random()).slice(2,8)),e.addRaw("vp",i.detectViewport()),e.addRaw("ds",i.detectDocumentSize()),e.addRaw("vid",a),e.addRaw("duid",r),e.add("p",H),e.add("tv",f),e.add("fp",oe),e.add("aid",q),e.add("lang",ne),e.add("cs",te),e.add("tz",ae),e.add("uid",N),e.add("tna",n),R.length&&e.add("refr",de(R)),re)Object.prototype.hasOwnProperty.call(re,t)&&(l="res"===t||"cd"===t||"cookie"===t?"":"f_",e.addRaw(l+t,re[t]));e.add("url",de(b));var A=e.build();return K&&(!function(e,t,n,r,a){o.cookie(he("id"),e+"."+t+"."+n+"."+r+"."+a,Z,w,W)}(r,c,a,p,u),o.cookie(m,d.getTime()+1e3*$,$,w,W)),A}function Se(e){return("https:"==I.location.protocol?"https":"http")+"://"+e+"/i"}function _e(e,t){var n=r.fixupTitle(e||z),a=c.payloadBuilder(X);a.add("e","pv"),a.add("page",n),a.addJson("cx","co",fe(t)),ge(xe(a),Y);var o=new Date;m&&v&&!ce&&(ce=!0,Ae(),r.addEventListener(I,"click",ye),r.addEventListener(I,"mouseup",ye),r.addEventListener(I,"mousedown",ye),r.addEventListener(I,"mousemove",ye),r.addEventListener(I,"mousewheel",ye),r.addEventListener(L,"DOMMouseScroll",ye),r.addEventListener(L,"scroll",we),r.addEventListener(I,"keypress",ye),r.addEventListener(I,"keydown",ye),r.addEventListener(I,"keyup",ye),r.addEventListener(L,"resize",ye),r.addEventListener(L,"focus",ye),r.addEventListener(L,"blur",ye),S=o.getTime(),setInterval((function(){var e=new Date;S+v>e.getTime()&&m<e.getTime()&&function(e,t){var n=c.payloadBuilder(X);n.add("e","pp"),n.add("page",e),n.addRaw("pp_mix",_),n.addRaw("pp_max",T),n.addRaw("pp_miy",O),n.addRaw("pp_may",C),n.addJson("cx","co",fe(t)),Ae(),ge(xe(n),Y)}(n,t)}),v))}function Te(e,n){if(r.deleteEmptyProperties(e.data),!t.isEmpty(e.data)){var a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:e},o=c.payloadBuilder(X);o.add("e","ue"),o.addJson("ue_px","ue_pr",a),o.addJson("cx","co",fe(n)),ge(xe(o),Y)}}function Oe(e,t,n,r,a,o,i,s){var u=c.payloadBuilder(X);u.add("e","ti"),u.add("ti_id",e),u.add("ti_sk",t),u.add("ti_na",n),u.add("ti_ca",r),u.add("ti_pr",a),u.add("ti_qu",o),u.add("ti_cu",i),u.addJson("cx","co",fe(s)),ge(xe(u),Y)}function Ce(e,t,n,r,a){Te({schema:F+"/link_click/jsonschema/1-0-0",data:{targetUrl:e,elementId:t,elementClasses:n,elementTarget:r}},a)}function Ee(e,t){return""!==e?e+t.charAt(0).toUpperCase()+t.slice(1):t}function Pe(e){var t,n,a,o=["","webkit","ms","moz"];if(!b)for(n=0;n<o.length;n++)if(a=o[n],Object.prototype.hasOwnProperty.call(I,Ee(a,"hidden"))){"prerender"===I[Ee(a,"visibilityState")]&&(t=!0);break}t?r.addEventListener(I,a+"visibilitychange",(function t(){I.removeEventListener(a+"visibilitychange",t,!1),e()})):e()}function je(e,n){for(var a,o,i,c,s;null!==(a=e.parentNode)&&!t.isUndefined(a)&&"A"!==(o=e.tagName.toUpperCase())&&"AREA"!==o;)e=a;if(!t.isUndefined(e.href)){var u=e.hostname||r.getHostName(e.href),l=u.toLowerCase(),f=e.href.replace(u,l);new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i").test(f)||(i=e.id,c=t.map(e.classList),s=e.target,Ce(f=unescape(f),i,c,s,n))}}function De(e){return function(t){var n,r;n=(t=t||L.event).which||t.button,r=t.target||t.srcElement,"click"===t.type?r&&je(r,e):"mousedown"===t.type?1!==n&&2!==n||!r?E=P=null:(E=n,P=r):"mouseup"===t.type&&(n===E&&r===P&&je(r,e),E=P=null)}}function Ne(e){k?(r.addEventListener(e,"mouseup",De(x),!1),r.addEventListener(e,"mousedown",De(x),!1)):r.addEventListener(e,"click",De(x),!1)}function Ie(){var e,t=I.links;for(e=0;e<t.length;e++)A(t[e])&&!t[e][ie]&&(Ne(t[e]),t[e][ie]=!0)}function Le(e,n,r){var a,o;x=r,k=n,!t.isArray(e)&&t.isObject(e)?e.hasOwnProperty("filter")?A=e.filter:(o=e.hasOwnProperty("whitelist"),a=e.whitelist||e.blacklist,t.isArray(a)||(a=[a]),A=function(e){return function(e,n){var r,a,o=t.map(e.classList);for(r=0;r<o.length;r++)for(a=0;a<n.length;a++)if(o[r]===n[a])return!0;return!1}(e,a)===o}):A=function(e){return!0}}return ve(),{getUserId:function(){return N},getDomainUserId:function(){return ke()[1]},getDomainUserInfo:function(){return ke()},setAppId:function(e){r.warn('setAppId is deprecated. Instead add an "appId" field to the argmap argument of newTracker.'),q=e},setReferrerUrl:function(e){R=e},setCustomUrl:function(e){h=function(e,t){var n;return pe(t)?t:"/"===t.slice(0,1)?pe(e)+"://"+r.getHostName(e)+t:((n=(e=de(e)).indexOf("?"))>=0&&(e=e.slice(0,n)),(n=e.lastIndexOf("/"))!==e.length-1&&(e=e.slice(0,n+1)),e+t)}(M,e)},setDocumentTitle:function(e){z=e},discardHashTag:function(e){y=e},setCookieNamePrefix:function(e){r.warn('setCookieNamePrefix is deprecated. Instead add a "cookieName" field to the argmap argument of newTracker.'),G=e},setCookieDomain:function(e){r.warn('setCookieDomain is deprecated. Instead add a "cookieDomain" field to the argmap argument of newTracker.'),W=r.fixupDomain(e),ve()},setCookiePath:function(e){w=e,ve()},setVisitorCookieTimeout:function(e){Z=e},setSessionCookieTimeout:function(e){$=e},setUserFingerprintSeed:function(e){r.warn('setUserFingerprintSeed is deprecated. Instead add a "userFingerprintSeed" field to the argmap argument of newTracker.'),ee=e,oe=i.detectSignature(ee)},enableUserFingerprint:function(e){r.warn('enableUserFingerprintSeed is deprecated. Instead add a "userFingerprint" field to the argmap argument of newTracker.'),e||(oe="")},respectDoNotTrack:function(e){r.warn('This usage of respectDoNotTrack is deprecated. Instead add a "respectDoNotTrack" field to the argmap argument of newTracker.');var t=J.doNotTrack||J.msDoNotTrack;V=e&&("yes"===t||"1"===t)},addListener:function(e,t,n){Ne(e)},enableLinkClickTracking:function(e,t,n){d.hasLoaded?(Le(e,t,n),Ie()):d.registeredOnLoadHandlers.push((function(){Le(e,t,n),Ie()}))},refreshLinkClickTracking:function(){Ie()},enableActivityTracking:function(e,t){var n=new Date;m=n.getTime()+1e3*e,v=1e3*t},killFrame:function(){L.location!==L.top.location&&(L.top.location=L.location)},redirectFile:function(e){"file:"===L.location.protocol&&(L.location=e)},setCountPreRendered:function(e){b=e},setUserId:function(e){N=e},setUserIdFromLocation:function(e){N=r.fromQuerystring(e,M)},setUserIdFromReferrer:function(e){N=r.fromQuerystring(e,R)},setUserIdFromCookie:function(e){N=o.cookie(e)},setCollectorCf:function(e){g=function(e){return Se(e+".cloudfront.net")}(e)},setCollectorUrl:function(e){g=Se(e)},setPlatform:function(e){r.warn('setPlatform is deprecated. Instead add a "platform" field to the argmap argument of newTracker.'),H=e},encodeBase64:function(e){r.warn('This usage of encodeBase64 is deprecated. Instead add an "encodeBase64" field to the argmap argument of newTracker.'),X=e},trackPageView:function(e,t){Pe((function(){_e(e,t)}))},trackStructEvent:function(e,t,n,r,a,o){!function(e,t,n,r,a,o){var i=c.payloadBuilder(X);i.add("e","se"),i.add("se_ca",e),i.add("se_ac",t),i.add("se_la",n),i.add("se_pr",r),i.add("se_va",a),i.addJson("cx","co",fe(o)),ge(xe(i),Y)}(e,t,n,r,a,o)},trackUnstructEvent:function(e,t){Te(e,t)},addTrans:function(e,t,n,r,a,o,i,c,s,u){ue.transaction={orderId:e,affiliation:t,total:n,tax:r,shipping:a,city:o,state:i,country:c,currency:s,context:u}},addItem:function(e,t,n,r,a,o,i,c){ue.items.push({orderId:e,sku:t,name:n,category:r,price:a,quantity:o,currency:i,context:c})},trackTrans:function(){!function(e,t,n,r,a,o,i,s,u,l){var f=c.payloadBuilder(X);f.add("e","tr"),f.add("tr_id",e),f.add("tr_af",t),f.add("tr_tt",n),f.add("tr_tx",r),f.add("tr_sh",a),f.add("tr_ci",o),f.add("tr_st",i),f.add("tr_co",s),f.add("tr_cu",u),f.addJson("cx","co",fe(l)),ge(xe(f),Y)}(ue.transaction.orderId,ue.transaction.affiliation,ue.transaction.total,ue.transaction.tax,ue.transaction.shipping,ue.transaction.city,ue.transaction.state,ue.transaction.country,ue.transaction.currency,ue.transaction.context);for(var e=0;e<ue.items.length;e++){var t=ue.items[e];Oe(t.orderId,t.sku,t.name,t.category,t.price,t.quantity,t.currency,t.context)}ue={transaction:{},items:[]}},trackLinkClick:function(e,t,n,r,a){Pe((function(){Ce(e,t,n,r,a)}))},trackImpression:function(e,t,n,a,o){r.warn("trackImpression is deprecated. When version 1.1.0 is released, switch to trackAdImpression."),function(e,t,n,r,a){var o=c.payloadBuilder(X);o.add("e","ad"),o.add("ad_ba",e),o.add("ad_ca",t),o.add("ad_ad",n),o.add("ad_uid",r),o.addJson("cx","co",fe(a)),ge(xe(o),Y)}(e,t,n,a,o)},trackAdImpression:function(e,t,n,r,a,o,i,c,s){Pe((function(){Te({schema:F+"/ad_impression/jsonschema/1-0-0",data:{impressionId:e,costModel:t,cost:n,bannerId:a,targetUrl:r,zoneId:o,advertiserId:i,campaignId:c}},s)}))},trackAdClick:function(e,t,n,r,a,o,i,c,s,u){Te({schema:F+"/ad_click/jsonschema/1-0-0",data:{targetUrl:e,clickId:t,costModel:n,cost:r,bannerId:a,zoneId:o,impressionId:i,advertiserId:c,campaignId:s}},u)},trackAdConversion:function(e,t,n,r,a,o,i,c,s,u){Te({schema:F+"/ad_conversion/jsonschema/1-0-0",data:{conversionId:e,costModel:t,cost:n,category:r,action:a,property:o,initialValue:i,advertiserId:c,campaignId:s}},u)}}}}()},{"./lib/detectors":11,"./lib/helpers":12,"./lib/proxies":13,"./lib_managed/lodash":14,"./out_queue":15,"./payload":16,JSON:1,"browser-cookie-lite":2,sha1:7}]},{},[9]);